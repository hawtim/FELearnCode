## 你对虚拟 dom 的理解？虚拟 dom 的性能和原生比较？ diff 算法怎样过程

虚拟 dom 是采用JavaScript方法来模拟dom树，用新渲染的对象树去和旧的树做对比，记录变化，然后应用到真实的dom树上，这样只需要更改与原来视图不同的地方，而不需要全部重新渲染

虚拟 dom 的性能和原生比较

<!-- vue 作者在知乎上的回答，很赞同，自己也做了笔记 -->

操作虚拟 dom 和操作原生 dom 的比较其实是一个性能和可维护性的取舍，没有任何框架操作 dom 可以比纯手动优化 dom 操作更快
框架上层会有很多的 api，如果每个api 都需要对 原生 dom 操作做优化的话是不适宜的
从可维护性考虑，框架给到的结果就是在不需要手动优化的情况下，提供足够好的性能

不管你的数据变化多少，每次重绘的性能都可以接受
你依然可以用类似的 innerHTML 的思路去写你的应用

vdom 是纯 js 层面的计算，比起dom操作的话消耗低了很多

diff 算法的过程

### 实现树的递归
新的节点的 tagNane 或者 key 和旧的不同，需要替换旧的节点
新的节点 tagName 和 key 都和旧的相同，判断属性是否变更，开始遍历子树
没有新的节点，则直接跳过这一层判断

### 判断属性的更改
先遍历 oldProps 查看是否存在删除的属性
然后遍历 newProps 查看是否有属性值被修改
最后查看是否有属性新增

### 判断列表差异算法实现
遍历旧节点，查看节点是否存在新的节点列表中
遍历新节点，判断是否有新的节点
在第二部中同时判断节点是否有移动
<!-- 只对有 key 的节点做处理 -->

### 遍历子元素打标识
判断两个列表差异
给节点打上标记

### 渲染差异
深度遍历树，将需要做变更的操作取出来
局部更新 dom